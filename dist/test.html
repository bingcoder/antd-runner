<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script src="https://cdn.bootcdn.net/ajax/libs/babel-standalone/7.20.2/babel.min.js"></script>
  <script>
function transformImportUmd({ types: t }) {
    return {
      name: 'transform-import-umd',
      visitor: {
        ImportDeclaration: (path, state) => {
          var _a, _b;
          const variableDeclarator = getVariableDeclarator(
            path,
            t,
            (_b =
              (_a = state.opts) === null || _a === void 0
                ? void 0
                : _a.externals) !== null && _b !== void 0
              ? _b
              : {}
          );
          if (variableDeclarator.length === 0) {
            path.remove();
          } else {
            path.replaceWith(
              t.variableDeclaration('const', variableDeclarator)
            );
          }
        },
        ExportDefaultDeclaration: (path, state) => {
          const name = path.node.declaration.name;
          path.replaceWith(            t.variableDeclaration('const', [
              t.variableDeclarator(
                t.identifier('antdRunnerApp'),
                t.identifier(name),
              ),
            ]));
        },
      },
    };
  }
  function getVariableDeclarator(path, t, externals) {
    const variableDeclarator = [];
    path.node.specifiers.forEach((specifier) => {
      if (
        t.isImportDefaultSpecifier(specifier) ||
        t.isImportNamespaceSpecifier(specifier)
      ) {
        if (
          isExpectedImport(
            specifier.local.name,
            path.node.source.value,
            externals
          )
        ) {
          variableDeclarator.push(
            t.variableDeclarator(
              specifier.local,
              transferSourcePath(path.node.source.value, t, externals)
            )
          );
        }
      } else {
        variableDeclarator.push(
          t.variableDeclarator(
            specifier.local,
            t.memberExpression(
              transferSourcePath(path.node.source.value, t, externals),
              specifier.imported
            )
          )
        );
      }
    });
    return variableDeclarator;
  }
  function transferSourcePath(sourcePath, t, externals) {
    const sourceLib = Object.keys(externals).find((externalLib) =>
      sourcePath.startsWith(externalLib)
    );
    const path = sourceLib
      ? sourcePath.replace(sourceLib, externals[sourceLib])
      : sourcePath;
    const [libName, ...properties] = path.split('/');
    return properties.reduce(
      (object, property) =>
        t.memberExpression(object, t.stringLiteral(property), true),
      t.identifier(libName)
    );
  }
  function isExpectedImport(local, sourcePath, externals) {
    const isUmdExternal = externals[sourcePath] === local;
    const isRelativeModule = sourcePath.startsWith('.');
    return !(isUmdExternal || isRelativeModule);
  }

  Babel.registerPlugin('transform-import-umd', transformImportUmd);

  Babel.registerPreset('tsx-antd-online', {
    presets: [
      [
        Babel.availablePresets['typescript'],
        { allExtensions: true, isTSX: true },
      ],
      [Babel.availablePresets['react']],
    ],
    plugins: [
      [
        Babel.availablePlugins['transform-import-umd'],
        {
          externals: {
            react: 'React',
            'react-dom': 'ReactDOM',
            antd: 'antd',
            '@ant-design/icons': 'AntdIcons',
            moment: 'moment',
          },
        },
      ],
    ],
  });
  </script>
  <script>
            var output = Babel.transform(`
import { Button, Radio } from '@ant-design/icons';

const App: React.FC = () => {
  const [size, setSize] = useState<SizeType>('large');

  return (
    <div>
      <Button type="primary" size={size}>
        Primary
      </Button>

    </div>
  );
};

export default Appd;
     
      `, {
        presets: ['tsx-antd-online'],
      })

      console.log(output.code);
  </script>
</body>
</html>